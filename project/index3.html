<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>site dobryj</title>
    <style >
        body {
            background-color: gray;
        }
        div {position: absolute;}
        .mini1 {border: burlywood 1px solid;
            height: 98px;
            width: 98px;}
            .mini1 img {width: 97px; height: 97px;}
    </style>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
         <ul>
    <li><a href="index1.html">Lekcja 1</a>
    <li><a href="index2.html">Lekcja 2</a>
    <li><a href="index3.html">Lekcja 3</a>
    <li><a href="index4.html">Lekcja 4</a>
    <li><a href="index5.html">Lekcja 5</a>
    <li><a href="index6.html">Lekcja 6</a>
    <li><a href="index.html" style="padding-left:350px;">Main page</a>
</ul>
    <form>
        <input type="button" id="Zakryj" value="zakryj" style="margin-left:550px;">
        <input type="button" id="Losuj" value="losuj">
    </form>
    <!-- boxes  -->
    <div class="mini1" id="a1" style="top:50px;left:50px" onclick="Graj(this)"><img src="lekcja3/kaf2.jpg"></div>
    <div class="mini1" id="a2" style="top:50px;left:150px" onclick="Graj(this)"><img src="lekcja3/kaf3.jpg"></div>
    <div class="mini1" id="a3" style="top:150px;left:50px" onclick="Graj(this)"><img src="lekcja3/kaf3.jpg"></div>
    <div class="mini1" id="a4" style="top:150px;left:150px" onclick="Graj(this)"><img src="lekcja3/kaf2.jpg"></div>
    <!-- boxes2  -->
    <div class="mini1" id="a5" style="top:50px;left:250px" onclick="Graj(this)"><img src="lekcja3/kaf4.jpg"></div>
    <div class="mini1" id="a6" style="top:150px;left:250px" onclick="Graj(this)"><img src="lekcja3/kaf4.jpg"></div>
    <div class="mini1" id="a7" style="top:50px;left:350px" onclick="Graj(this)"><img src="lekcja3/kaf5.jpg"></div>
    <div class="mini1" id="a8" style="top:150px;left:350px" onclick="Graj(this)"><img src="lekcja3/kaf5.jpg"></div>

    <div class="mini1" id="a9" style="top:250px;left:150px" onclick="Graj(this)"><img src="lekcja3/kaf6.jpg"></div>
    <div class="mini1" id="a10" style="top:250px;left:250px" onclick="Graj(this)"><img src="lekcja3/kaf6.jpg"></div>
    <div class="mini1" id="a11" style="top:250px;left:50px" onclick="Graj(this)"><img src="lekcja3/kaf7.jpg"></div>
    <div class="mini1" id="a12" style="top:250px;left:350px" onclick="Graj(this)"><img src="lekcja3/kaf7.jpg"></div>
    <script type="text/javascript">
    	let opening = false
    	function Zakryj () {
            for (let i = 0; i < 12; i++) {
                document.getElementsByTagName("img")[i].setAttribute("src", "lekcja3/kaf1.jpg")
            }
            opening = false
        }
        document.getElementById("Zakryj").onclick =  Zakryj
        let arr = [ "2", "3", "3", "2", "4", "4", "5", "5", "6", "6", "7", "7"]
         document.getElementById("Losuj").onclick = function () {
            let max = [0, 0, 0, 0, 0, 0, 0, 0] 
            for (let i = 0; i < 12; i++) {
                let rand;
                do {
                	rand = Math.round(Math.random() * 5 + 2)
                } while (max[rand] >= 2)
             	max[rand]++
          
                document.getElementsByTagName("img")[i].setAttribute("src", "lekcja3/kaf" + String(rand) + ".jpg")
                arr[i] = String(rand)
            }
        }
        let opened = []
        function Graj(e)
        {	
        	if (opening) return
        	el = e.childNodes[0]
        	el.setAttribute("src", "lekcja3/kaf" + (arr[Number(e.id.substr(1, e.id.length-1)) - 1]) + ".jpg")
            if (opened.length==0){
                opened.push(el)
                return
            }
            else if (opened.length==1){
               if  (el.getAttribute("src")==opened[0].getAttribute("src")){
               	let a = opened[0]
               	opening = true
               	setTimeout(() => {
               		opening = false
               		el.style.visibility="hidden";
                	a.style.visibility="hidden";
               	}, 500)              
               }
               else{
               	opening = true
                setTimeout(Zakryj, 500)
               }
               opened=[]
            }

        }
      
    </script>