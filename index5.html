<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type="text/css">
            div {
                position: absolute;width: 100px;
                height: 100px;
                border: red 1px solid;
            }
            img {
                width: 100px;
                height: 100px;
            }
            body {
                background-color: gray;
            }
    </style>
</head>
<body >
    <ul>
    <li><a href="index1.html">Lekcja 1</a>
    <li><a href="index2.html">Lekcja 2</a>
    <li><a href="index3.html">Lekcja 3</a>
    <li><a href="index4.html">Lekcja 4</a>
    <li><a href="index5.html">Lekcja 5</a>
    <li><a href="index6.html">Lekcja 6</a>
    <li><a href="index.html" style="padding-left:350px;">Main page</a>
</ul>
    <input type='button' id="Losuj" value="Losuj">
    
</body>
<script type="text/javascript">
  window.onload = () =>  gengrid(false)

  function gengrid(isRandom){
    if (isRandom) clearGrid()
    var num=4;
    let state = new Set()

    for (var i=0; i<num; i++) {
      for (var j=0; j<num; j++) {
        if (!isRandom) {
          createImage(i, j)
        } else {
          let size = state.size
          while (state.size <= size) {
            let randJ = Math.round(Math.random() * 3)
            let randI = Math.round(Math.random() * 3)

            state.add(String(randJ)+(String(randI)))
          }
          let top = Number(Array.from(state)[state.size - 1][0])
          let left = Number(Array.from(state)[state.size - 1][1])
          createImage(i, j, top, left)
        } 
      }
    } 
  }

  function clearGrid() {
    let len = document.body.childNodes.length - 1
    for (len; len > 5; len--) {
        document.body.removeChild(document.body.childNodes[len])
    }
    console.log(document.body.childNodes)
  }

  function createImage(i, j, top, left) {
    let newdiv= document.createElement('div');
    let divIdName='a'+i+j;
    console.log(top, left)

    newdiv.setAttribute('id', divIdName);

    if (top !== undefined && left !== undefined) {
      newdiv.style.top = 100 + 100 * top + 'px';
      newdiv.style.left = 100 + 100 * left + 'px';
    } else {
      newdiv.style.top = 100 + 100 * i + 'px';
      newdiv.style.left = 100 + 100 * j + 'px';
    }

    if (i * j != 9) newdiv.innerHTML = "<img src='lekcja5/slice_" + i + "_" + j + ".jpg'>";

    newdiv.addEventListener('click', function(){
        Graj(this);
    });

    document.body.appendChild(newdiv);
  }
      
     function Graj (x){
         let roz;
         roz='100px';
         let roz3 = x.style.top.substring(0, 3)
         let roz4 = a33.style.top.substring(0, 3)
         if (x.style.left==a33.style.left && (roz3-roz4 == 100 || roz4-roz3 == 100 ) ){
             var buror;
             bufor=x.style.top;
             x.style.top=a33.style.top;
             a33.style.top=bufor;
             
         }
         let roz1 = x.style.left.substring(0, 3)
         let roz2 = a33.style.left.substring(0, 3)
                if (x.style.top==a33.style.top && (roz2-roz1 == 100 || roz1-roz2 == 100 )) {
             var buror;
             bufor=x.style.left;
             x.style.left=a33.style.left;
             a33.style.left=bufor;

         }

     }
     
     document.getElementById("Losuj").onclick =  () =>  gengrid(true)


  </script>
</html>